package Relationship;

import java.util.Random;

public class Galadriel extends NPC {
    public String imagePath; // null = ใช้รูปเดิม, ใส่ path = เปลี่ยนรูป

    public Galadriel() {
        super("Galadriel");
        heartLevel = 0;  
        affectionPoints = 90;  //ลองปรับตรงนี้ แยกของแต่ละคน 
    }
    //แก้บท
    @Override
    protected String getRandomDialogue(int level) {
        String[] dialogues;
        if (level < 2) {
            dialogues = new String[]{
                "อ...อย่าเดินเสียงดังนะคะ... เดี๋ยวน้องดอกไม้จะตกใจกลัว...",
                "งื้อ... (สะดุ้ง) ท...ท่านนักเดินทาง? ต...ต้องการดอกไม้หรือคะ?",
                "ข...ข้าเป็นแค่คนขายดอกไม้ธรรมดา... ไม่มีอะไรน่าสนใจหรอกค่ะ...",
                "ท่าน... ท่านไม่ได้จะมาเหยียบย่ำสวนของข้าใช่ไหมคะ?" ,
                "ถ้าท่านเหนื่อย... นั่งพักตรงเก้าอี้ไม้ได้นะคะ... ข้าไม่คิดเงิน..." ,
                "ก...กลิ่นตัวท่าน... เหมือนกลิ่นเหล็กและเลือดเลย... (ถอยห่าง)" ,
                "ทะ...ท่านมองเห็นภูติตัวน้อยๆ ตรงนั้นไหมคะ? ...อ้อ ท่านคงไม่เห็น..." ,
                "ข้า... ข้าคุยไม่เก่งหรอกค่ะ... ท่านไปคุยกับคนอื่นเถอะ..." ,
                "ยะ...ยินดีต้อนรับสู่ร้านดอกไม้เล็กๆ ของข้าค่ะ..." ,
                "ดอกกุหลาบสีแดง... หมายถึงความรัก... (หน้าแดง) ข้าแค่บอกเฉยๆ นะ!" ,
            };
        } else if (level < 4) {
            dialogues = new String[]{
                "อ๊ะ! ท่านมาแล้ว... วันนี้ดอกทานตะวันบานรับท่านด้วยล่ะค่ะ" ,
                "ข้า... ข้าลองคุยกับต้นไม้เรื่องท่านดู... พวกเขาบอกว่าท่านเป็นคนดีนะ" ,
                "ท่าน... อยากลองฟังเสียงกระซิบของสายลมกับข้าไหมคะ?" ,
                "วันนี้ท่านดูสดใสจัง... เหมือนดอกเดซี่แรกแย้มเลย (ยิ้มเขินๆ)" ,
                "ป่าแห่งนี้... ดูปลอดภัยขึ้นเมื่อมีท่านเดินเป็นเพื่อนข้าค่ะ" ,
                "ข้าทำมงกุฎดอกไม้ไว้... ท...ท่านจะรังเกียจไหมถ้าข้าจะมอบให้?" ,
                "เล่าเรื่องการผจญภัยให้ข้าฟังอีกได้ไหมคะ? ข้าชอบฟังท่านเล่า..." ,
                "ข้า... ข้าเริ่มชินกับกลิ่นดาบของท่านแล้วล่ะ... มันดูอบอุ่นดีนะ" ,
                "ถ้าท่านหายไปนานๆ... ดอกไม้คงเหี่ยวเฉาแน่ๆ... ข้าหมายถึงดอกไม้นะ! ไม่ใช่ข้า!" ,
                "ท่านรู้ไหมคะ... ท่านเป็นมนุษย์คนแรกที่ข้าคุยด้วยได้นานขนาดนี้..." 
            };
        } else {
            dialogues = new String[]{
                "งื้อออ... (วิ่งมากอด) ท่านกลับมาแล้ว! ข้าคิดถึงท่านจนดอกไม้แทบลืมบานเลย!" ,
                "ท่านคือราชาแห่งป่าของข้า... และข้าคือราชินีดอกไม้ของท่าน... ใช่ไหมคะ?" ,
                "อย่าไปใกล้นางไม้ตนอื่นนะ! ...ข้าหวง! ข้าจะให้เถาว์วัลย์มัดท่านไว้เลย!" ,
                "หัวใจของข้า... เต้นแรงกว่าปีกผีเสื้อเวลาอยู่ใกล้ท่านอีก..." ,
                "ข้าอยากปลูกดอกไม้แห่งความรักไปตลอดเส้นทางที่ท่านเดิน... ท่านจะได้รู้ว่าข้ารักท่าน" ,
                "ท่านสัญญาแล้วนะว่าจะไม่ทิ้งข้า... ถ้าผิดสัญญา ข้าจะสาปให้ท่านกลายเป็นกบ!" ,
                "กอดข้าหน่อยสิคะ... ข้าอยากเติมพลังเวทมนตร์แห่งความสุข..." ,
                "ท่าน... ท่านทำให้โลกสีเขียวของข้า กลายเป็นสีชมพูไปหมดแล้ว..." ,
                "ไม่ว่าท่านจะไปที่ไหน... วิญญาณแห่งป่าและหัวใจของข้าจะติดตามท่านไปเสมอค่ะ" ,
                "รักท่านที่สุดเลย... เจ้ามนุษย์บ้าของข้า!" 
            };
        }
        return dialogues[new Random().nextInt(dialogues.length)];
    }

    @Override
    protected String getSpecialScene(int level) {
        // ใช้ getDialogueTree แทนแล้ว แต่เก็บไว้เผื่อ fallback
        return switch (level) {
            case 1 -> "— พบกับ Lazel เป็นครั้งแรก —";
            case 2 -> "— Lazel เริ่มไว้ใจเจ้า —";
            case 3 -> "— Lazel ยอมรับเจ้าเป็นสหาย —";
            case 4 -> "— Lazel เปิดใจให้เจ้า —";
            case 5 -> "— Lazel สารภาพรัก —";
            default -> "...";
        };
    }

    // ============================================================
    // ระบบ Dialogue Tree
    // ============================================================

    /**
     * คืนค่า root node ของ Dialogue Tree ตาม heartLevel
     * SpecialScenePanel จะรับ node นี้แล้ว traverse ไปเรื่อยๆ
     */
    public DialogueNode getDialogueTree(int level) {
        return switch (level) {
            case 1 -> buildLevel1Tree();
            // level อื่นๆ เพิ่มทีหลัง
            default -> buildLevel1Tree();
        };
    }

    // ============================================================
    // Level 1 Dialogue Tree (ตามตาราง)
    // ============================================================
    private DialogueNode buildLevel1Tree() {

    // === END NODES ===
    DialogueNode endBad = new DialogueNode("Galadriel", "(หันหน้าหนี ไม่สนใจ)", true);
    DialogueNode endNormal = new DialogueNode("Galadriel", "(ยิ้มเบาๆ แล้วก้มหน้าดูแลต้นไม้ต่อ)", true);
    DialogueNode endGood = new DialogueNode("Galadriel", "(โบกมือลาพร้อมรอยยิ้มอ่อนๆ) \"ขอบคุณที่แวะมานะคะ...\"", true);
    DialogueNode endBest = new DialogueNode("Galadriel", "(ตบมือดีใจ หน้าสว่างมาก) \"ยินดีต้อนรับสู่ครอบครัวต้นไม้นะคะ!!\"", true);

    // === LEVEL 5 ===
    DialogueNode n1_5A = new DialogueNode("Galadriel",
        "(ยิ้มกว้างจนแก้มปริ) \"เย้! ...เราเป็นพวกเดียวกันแล้วสินะคะ! สัญญาได้ไหมว่าจะแวะมาฟังเสียงพวกเขากับข้าบ่อยๆ?\"");
    n1_5A.addChoice("สัญญาครับ ผมจะมาหาทุกวันเลย", endBest)
         .addChoice("ถ้าว่างจะมานะ", endGood)
         .addChoice("ขอดอกไม้นั่นฟรีได้ไหม?", endNormal);

    DialogueNode n1_5B = new DialogueNode("Galadriel",
        "(รีบชักมือกลับหน้าแดง) \"งื้อ... วันนี้พอก่อนดีกว่าค่ะ... ข้าเริ่มเวียนหัวแล้ว ท่าน... กลับดีๆ นะคะ\"");
    n1_5B.addChoice("พักผ่อนนะ ไว้เจอกันครับ", endGood)
         .addChoice("ครับ บาย", endNormal)
         .addChoice("เสียเวลาชะมัด", endBad);

    DialogueNode n1_5C = new DialogueNode("Galadriel",
        "\"ค่ะ... เชิญท่านตามสบายเถอะค่ะ\" (หันไปคุยกับดอกไม้ไม่สนใจคุณ)");
    n1_5C.addChoice("ไปละ", endNormal)
         .addChoice("คุยคนเดียวอีกละ", endBad)
         .addChoice("(เดินจากไป)", endNormal);

    // === LEVEL 4 ===
    DialogueNode n1_4A = new DialogueNode("Galadriel",
        "(เธอยื่นมือกุมมือคุณไปแตะที่ใบไม้เบาๆ) \"หลับตานะคะ... หายใจเข้าลึกๆ... ท่านได้ยินเสียงหัวใจของมันไหม?\"");
    n1_4A.addChoice("ได้ยินแล้ว... เสียงเหมือนดนตรีเบาๆ เลย", n1_5A)
         .addChoice("ไม่ได้ยินอะไรเลย... แต่ว่า มือท่านนุ่มจังนะ", n1_5A)
         .addChoice("เงียบกริบเลยครับ", n1_5B);

    DialogueNode n1_4B = new DialogueNode("Galadriel",
        "\"ว้า... เสียดายจัง... สงสัยท่านต้องฝึกสมาธิเพิ่มอีกหน่อย... แต่ไม่เป็นไรค่ะ ข้าจะแปลให้ท่านฟังเอง\"");
    n1_4B.addChoice("รบกวนด้วยนะครับ ล่ามคนสวย", n1_5A)
         .addChoice("ขอบคุณครับ วันหลังจะมาฟังใหม่", n1_5B)
         .addChoice("พอเถอะครับ ผมไม่อิน", n1_5C);

    DialogueNode n1_4C = new DialogueNode("Galadriel",
        "\"ท่านนี่... เข้าใจยากจังเลยนะคะ... (ทำหน้ามุ่ย)\"");
    n1_4C.addChoice("อย่าโกรธสิครับ ผมแค่ล้อเล่น", n1_5B)
         .addChoice("ผมเป็นคนแบบนี้แหละ", n1_5C)
         .addChoice("ท่านนั่นแหละที่เข้าใจยาก", endBad);

    // === LEVEL 3 ===
    DialogueNode n1_3A = new DialogueNode("Galadriel",
        "(เงยหน้ามองตาแป๋ว) \"ท่าน... ท่านไม่รังเกียจคนแปลกๆ แบบข้าเหรอคะ? ...งั้น... ท่านอยากลองฟังเสียงพวกเขาดูไหม?\"");
    n1_3A.addChoice("อยากสิครับ ต้องทำยังไงบ้าง?", n1_4A)
         .addChoice("ไม่ล่ะครับ ผมหูไม่ดี", n1_4B)
         .addChoice("ท่านได้ยินคนเดียวรึเปล่า?", n1_3A); // loop ไปถามต่อ -> redirect ไป 3B

    DialogueNode n1_3B = new DialogueNode("Galadriel",
        "\"เขาบอกว่า... หิวน้ำค่ะ แล้วก็... บอกว่าท่านดูเป็นคนใจดีนะ... (แอบมอง)\"");
    n1_3B.addChoice("ต้นไม้มองแม่นนะเนี่ย", n1_4A)
         .addChoice("เหรอครับ แปลกดีนะ", n1_4B)
         .addChoice("ต้นไม้ขี้โม้แฮะ", n1_4C);

    DialogueNode n1_3C = new DialogueNode("Galadriel",
        "(ปาดน้ำตา) \"ฮึก... เห็นแก่ที่ท่านขอโทษ... ข้าจะยกโทษให้ครั้งนึงก็ได้ค่ะ... แต่ท่านต้องสัญญานะว่าจะไม่ล้อข้าอีก\"");
    n1_3C.addChoice("สัญญาด้วยเกียรติลูกเสือครับ", n1_4B)
         .addChoice("ครับๆ สัญญา", n1_4C)
         .addChoice("ไม่รับปากนะ", endBad);

    // === LEVEL 2 ===
    DialogueNode n1_2A = new DialogueNode("Galadriel",
        "(หน้าแดงก่ำ ก้มหน้างุด) \"งื้อ... ท่านต้องหาว่าข้าบ้าแน่ๆ... ข้าแค่... ต้นไม้มักจะขี้เหงาน่ะค่ะ ข้าเลยต้องชวนคุย...\"");
    n1_2A.addChoice("ไม่บ้าหรอกครับ ผมว่าน่ารักดีออก", n1_3A)
         .addChoice("แล้วต้นกุหลาบมันตอบว่าไงบ้างล่ะ?", n1_3B)
         .addChoice("แล้วต้นไม้คุยตอบไหมครับ?", n1_3B);

    DialogueNode n1_2B = new DialogueNode("Galadriel",
        "(ถอนหายใจโล่งอก) \"ฟู่ว์... โชคดีจัง... คือข้า... ข้าแค่ซ้อมบทละครน่ะค่ะ! ใช่ๆ ซ้อมละคร!\"");
    n1_2B.addChoice("อ๋อ... แสดงเก่งนะเนี่ย นึกว่าคุยกับต้นไม้จริงๆ", n1_3A)
         .addChoice("โกหกไม่เก่งเลยนะแม่สาวดอกไม้ บอกความจริงมาเถอะ", n1_2A)
         .addChoice("ละครอะไร บทแปลกดีนะ", n1_3C);

    DialogueNode n1_2C = new DialogueNode("Galadriel",
        "(น้ำตาคลอเบ้า) \"ข้าไม่ได้เพี้ยนนะ! ...ท่านออกไปเลยนะ! ร้านข้าไม่ต้อนรับคนใจร้าย!\"");
    n1_2C.addChoice("ขอโทษครับ! ผมปากเสียเอง ยกโทษให้ผมนะ", n1_3C)
         .addChoice("ไปก็ได้ ร้านก็แคบ", endBad)
         .addChoice("ก็มันจริงนี่นา", endBad);

    // === ROOT (1.1) ===
    DialogueNode root = new DialogueNode("Galadriel",
        "(สะดุ้งโหยงเมื่อเห็นคุณเดินเข้ามาในร้าน) \"งื้อ! ...ท...ท่าน! ท...ท่านได้ยินอะไรไหมคะ? ข้า... ข้าไม่ได้คุยกับต้นกุหลาบนะ! จ...จริงๆ นะ!\"");
    root.addChoice("ผมได้ยินเต็มสองหูเลยว่าคุยกับต้นไม้", n1_2A)
        .addChoice("เปล่านี่ครับ ผมเพิ่งเดินมาถึง ไม่ได้ยินอะไรเลย", n1_2B)
        .addChoice("คุยกับต้นไม้? เพี้ยนรึเปล่าเนี่ย?", n1_2C);

    return root;
}
}
